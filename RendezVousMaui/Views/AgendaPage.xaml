<?xml version="1.0" encoding="utf-8" ?>
<ContentPage 
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    x:Class="RendezVousMaui.Views.AgendaPage"
    Title="Agenda"
    BackgroundColor="#F2F2F2">

    <VerticalStackLayout Padding="20" Spacing="15">

        <!-- Bouton de bascule -->
        <Button Text="{Binding ModeButtonText}"
                Command="{Binding SwitchModeCommand}"
                BackgroundColor="#3E64FF"
                TextColor="White"
                CornerRadius="12" />

        <!-- SÃ©lecteur de date (visible uniquement en mode JOUR) -->
        <DatePicker Date="{Binding SelectedDate}" 
                    IsVisible="{Binding IsDayMode}" />

        <!-- Vue JOUR -->
        <CollectionView ItemsSource="{Binding DaySlots}"
                        IsVisible="{Binding IsDayMode}">
            <CollectionView.ItemTemplate>
                <DataTemplate>
                    <Border Stroke="#CCC" BackgroundColor="White"
                            Padding="10" Margin="0,5">

                        <Grid ColumnDefinitions="*,Auto">
                            <Label Text="{Binding Heure}" FontSize="18"/>
                            <Label Text="{Binding Statut}" 
                                   TextColor="Gray"
                                   Grid.Column="1"/>
                        </Grid>

                    </Border>
                </DataTemplate>
            </CollectionView.ItemTemplate>
        </CollectionView>

        <!-- Vue SEMAINE -->
        <ScrollView IsVisible="{Binding IsWeekMode}">
            <Grid x:Name="WeekGrid"
                  RowSpacing="1"
                  ColumnSpacing="1"
                  BackgroundColor="#DDD"
                  Padding="1"
                  HeightRequest="650">
            </Grid>
        </ScrollView>

    </VerticalStackLayout>

</ContentPage>
